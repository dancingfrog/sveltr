---
title: GL
author: John
date: '2020-03-14'
draft: false
categories:
  - GL
tags:
  - GL
  - Svelte
  - SvelteGL
  - WebGL
---

<div id="gl-app"></div>

## Embedding JSON data in HTML

```{r setup, include=FALSE}
options(warn = -1)
working_dir <- getwd()
print(working_dir)
if (!require("knitr")) {
    install.packages("knitr")
    library("knitr")
}
knitr::opts_chunk$set(cache = TRUE)
knitr::opts_chunk$set(echo = TRUE)

# Load reticulate package for running python
if (!require("png")) {
    install.packages("png")
}
library(png)
```

If the output target is HTML, R has some methods for turning R data into JavaScript or JSON data and printing the results within HTML tags.
<br />
<br />
<img src="/post/data/heightmap-small.png" style="float: right; width:256px;" />
After using R to read each pixel of this heightmap, the table (data.frame) is written to json ...
<br />
```{r data, echo = FALSE, results = "asis"}
options(warn = -1)
working_dir <- getwd()
# print(working_dir)
heightmap <- data.frame(c())
if (file.exists("data/heightmap-small.png")) {
    heightmap <- data.frame(png::readPNG("data/heightmap-small.png"))
    # head(heightmap)
    # length(heightmap)
    # str(heightmap)
}

require(jsonlite)

# print without tabs so R markdown will add it to the DOM tree of the resulting page
cat(paste('<div id="data_in_html"><script type="application/json">', toJSON(heightmap), '\n</script>\n</div>', sep=""))
```
